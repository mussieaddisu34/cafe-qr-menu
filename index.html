<!DOCTYPE html>
<html>
<head>
  <title>My Cafe - Menu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body{ font-family: Arial; padding:20px; background:#f5f5f5; }
    h1,h2{ color:#333; }
    
    .categoryNav button{
      padding:8px 12px; margin:5px;
      border:none; border-radius:5px;
      cursor:pointer; transition:0.3s;
      background:#c8e6c9;
    }

    .categoryNav button.active{
      background:#2e7d32;
      color:white;
    }

    .item{
      background:#e8f5e9;
      padding:10px;
      margin-bottom:8px;
      border-radius:8px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .item button{
      background:#2e7d32;
      color:white;
      border:none;
      border-radius:5px;
      padding:5px 8px;
      cursor:pointer;
    }

    #cart{
      background:#dcedc8;
      padding:15px;
      border-radius:8px;
      margin-top:20px;
    }

    #cart button{
      background:#2e7d32;
      color:white;
      border:none;
      border-radius:5px;
      padding:5px 8px;
      cursor:pointer;
    }

    #submitOrderBtn{
      margin-top:10px;
      padding:8px 15px;
      font-weight:bold;
    }
  </style>
</head>
<body>

<h1>üçΩÔ∏è My Cafe Menu</h1>

<!-- CATEGORY BUTTONS -->
<div class="categoryNav">
  <button onclick="showCategory('Drinks')" id="btnDrinks">Drinks</button>
  <button onclick="showCategory('Foods')" id="btnFoods">Foods</button>
</div>

<!-- ITEMS -->
<div id="itemList"></div>

<!-- CART -->
<div id="cart">
  <h2>üõí Cart</h2>
  <div id="cartItems"></div>
  <h3 id="totalPrice">Total: $0</h3>
  <button id="submitOrderBtn" onclick="submitOrder()">Submit Order</button>
</div>

<script>

/* ===== LOAD MENU FROM ADMIN ===== */
let menu = JSON.parse(localStorage.getItem('menu')) || {
  categories:["Drinks","Foods"],
  items:[
    {name:"Cappuccino",price:4,category:"Drinks"},
    {name:"Latte",price:5,category:"Drinks"},
    {name:"Espresso",price:3,category:"Drinks"},
    {name:"Cheesecake",price:6,category:"Foods"},
    {name:"Sandwich",price:7,category:"Foods"}
  ]
};

let cart = [];
let selectedTable = "Table 1"; // You can make this dynamic later

/* ===== SHOW CATEGORY ===== */
function showCategory(cat){
  const itemList = document.getElementById('itemList');
  itemList.innerHTML = '';

  menu.items.filter(i => i.category === cat).forEach(i=>{
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `
      ${i.name} - $${i.price}
      <button onclick="addToCart('${i.name}', ${i.price})">Add</button>
    `;
    itemList.appendChild(div);
  });

  document.querySelectorAll('.categoryNav button')
    .forEach(b=>b.classList.remove('active'));
  document.getElementById('btn'+cat).classList.add('active');
}

/* ===== CART FUNCTIONS ===== */
function addToCart(name, price){
  let existing = cart.find(c => c.name === name);
  if(existing){
    existing.qty += 1;
  } else {
    cart.push({name, price, qty:1});
  }
  renderCart();
}

function removeFromCart(name){
  cart = cart.filter(c => c.name !== name);
  renderCart();
}

function renderCart(){
  const div = document.getElementById('cartItems');
  const totalDiv = document.getElementById('totalPrice');
  div.innerHTML = '';

  let total = 0;

  if(cart.length === 0){
    div.innerHTML = "<p>Cart is empty</p>";
    totalDiv.textContent = "Total: $0";
    return;
  }

  cart.forEach(c=>{
    total += c.price * c.qty;

    const d = document.createElement('div');
    d.innerHTML = `
      ${c.name} x${c.qty} - $${c.price*c.qty}
      <button onclick="removeFromCart('${c.name}')">Remove</button>
    `;
    div.appendChild(d);
  });

  totalDiv.textContent = "Total: $" + total;
}

/* ===== SUBMIT ORDER ===== */
function submitOrder(){
  if(cart.length === 0){
    alert("Cart is empty!");
    return;
  }

  // Save order for admin & chef
  localStorage.setItem('cart_'+selectedTable, JSON.stringify(cart));

  // Reset status
  localStorage.setItem('status_'+selectedTable, JSON.stringify({}));

  alert("Order submitted successfully!");

  cart = [];
  renderCart();
}

/* ===== INIT ===== */
window.onload = ()=>{
  showCategory('Drinks');
  renderCart();
};

</script>

</body>
</html>
